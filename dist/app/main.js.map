{"version":3,"sources":["./src/app/shared/components/d3-sensor/d3-sensor.component.ts","./src/app/shared/components/d3-sensor/d3-sensor.component.html","./src/environments/environment.ts","./src/app/shared/components/login/login.component.ts","./src/app/shared/components/login/login.component.html","./src/app/shared/shared.modules.module.ts","./src/app/auth/auth.component.ts","./src/app/auth/auth.component.html","./src/app/app/app.component.ts","./src/app/app/app.component.html","./src/app/shared/shared.module.ts","./src/app/shared/components/choose-sensor/choose-sensor.component.ts","./src/app/shared/components/choose-sensor/choose-sensor.component.html","./src/app/shared/models/sensor-indication.model.ts","./src/app/shared/models/index.ts","./src/app/app.module.ts","./src/app/shared/components/header/header.component.ts","./src/app/shared/components/header/header.component.html","./src/app/services/db.service.ts","./src/app/services/auth.service.ts","./src/app/services/sensors.service.ts","./src/app/services/user.service.ts","./src/app/shared/components/tui-sensor/tui-sensor.component.ts","./src/app/shared/components/tui-sensor/tui-sensor.component.html","./src/app/app-routing.module.ts","./src/main.ts","./$_lazy_route_resource lazy namespace object"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["import { Component, Input, OnInit, ViewChild } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { ceil, TuiDay, TuiDayRange } from '@taiga-ui/cdk';\nimport { tap, map } from 'rxjs/operators';\nimport firebase from 'firebase';\n\nimport { UntilDestroy, untilDestroyed } from '@ngneat/until-destroy';\nimport { TuiCalendarRangeComponent, tuiCreateDefaultDayRangePeriods, TUI_CALENDAR_DATA_STREAM } from '@taiga-ui/kit';\nimport { of } from 'rxjs';\nimport { generate, Data, AxesOptions, Primitive, ChartConfiguration, } from 'c3';\n\nimport { SensorsService } from 'src/app/services/sensors.service';\nimport { ISensorIndication, IAirQuality } from '../../models/';\n\n\nconst today = new Date();\nconst [year, month, day] = [today.getFullYear(), today.getMonth(), today.getDay()];\n\nexport const calendarStream$ = of(\n  new TuiDayRange(new TuiDay(year, month, day), new TuiDay(year, month, day - 3)),\n);\n\n@UntilDestroy()\n@Component({\n  selector: 'app-d3-sensor',\n  templateUrl: './d3-sensor.component.html',\n  styleUrls: ['./d3-sensor.component.scss'],\n  providers: [\n    {\n      provide: TUI_CALENDAR_DATA_STREAM,\n      useValue: calendarStream$,\n    },\n  ],\n})\nexport class D3SensorComponent implements OnInit {\n  @ViewChild(TuiCalendarRangeComponent) dateRange: TuiCalendarRangeComponent;\n  @Input() sensorId = '';\n  calItems = tuiCreateDefaultDayRangePeriods();\n  sensorBtnTitle: 'Start getting Data' | 'Stop' = 'Start getting Data';\n  fullSensorDateRange = [];\n  loadingState: 'stopped' | 'loading' | 'processed' = 'stopped';\n  fromTimestamp = firebase.firestore.Timestamp.fromMillis(Date.now()).toMillis();\n  toTimestamp = firebase.firestore.Timestamp.fromMillis(Date.now() - (1000 * 60 * 60 * 24 * 2)).toMillis();\n\n  constructor(private activeRoute: ActivatedRoute, private sensorsSvc: SensorsService) { }\n\n  ngOnInit() {\n    this.activeRoute.queryParams.pipe(untilDestroyed(this)).subscribe(params => {\n      this.sensorId = params['sensorID'];\n      this.sensorId = this.sensorsSvc.selectedSensor;\n      console.log(`[D3SensorCmp->ngOnInit()] :: sensor: ${this.sensorId}`);\n    });\n  }\n\n  ngAfterViewInit() {\n    const { from, to } = this.dateRange.value;\n    this.fromTimestamp = firebase.firestore.Timestamp.fromDate(new Date(to.toUtcNativeDate())).toMillis();\n    this.toTimestamp = firebase.firestore.Timestamp.fromDate(new Date(from.toUtcNativeDate())).toMillis();\n  }\n\n  startGetSensorData() {\n    // combineLatest([\n    //   this.sensorsSvc.getSensorFirstValTime(this.sensorId),\n    //   this.sensorsSvc.getSensorLastValTime(this.sensorId)\n    // ])\n    //   .subscribe(([first, last]) => this.fullSensorDateRange = [first, last]);\n\n    this.loadingState = 'loading';\n    this.sensorsSvc.getAllSensorData(this.sensorId, { startAt: this.fromTimestamp, endAt: this.toTimestamp })\n      .pipe(\n        untilDestroyed(this),\n        map((values: ISensorIndication[]) => {\n          const times = values.map(val => val.timestamp);\n          const vals = [...values.map(value => value.AirQuality)];\n          return { times, vals };\n        })\n        // take(1)\n      )\n      .subscribe(\n        ({ times, vals }: { times: number[], vals: IAirQuality[]; }) => {\n          let chartApi = generateChart({ bindto: 'chart', columns: getDataArray(vals) as any });\n          this.sensorValue = chartApi;\n          let minMaxDates = [new Date(Math.min(...times)), new Date(Math.max(...times))];\n          this.dateStamp = minMaxDates;\n          this.loadingState = 'processed';\n        }\n      );\n  }\n\n  sensorValue = null;\n  dateStamp = [];\n  labelsY = ['0', '150000'];\n\n  getHeight(max: number): number {\n    return (max / ceil(max, -3)) * 100;\n  }\n\n  getRange(range: TuiDayRange) {\n    const { from, to } = range;\n    this.fromTimestamp = firebase.firestore.Timestamp.fromDate(new Date(from.toUtcNativeDate())).toMillis();\n    this.toTimestamp = firebase.firestore.Timestamp.fromDate(new Date(to.toUtcNativeDate())).toMillis();\n  }\n\n}\n\n\nconst getDataArray = (data: IAirQuality[]) => {\n  if (!!!data?.length) return [];\n\n  const sensorTypes = Object.keys(data[0]);\n  let results = sensorTypes.map((sensorKey, i) => [sensorKey]);\n\n  results = data.reduce((accu: string[][], next: IAirQuality) => {\n    for (let item of accu) {\n      for (let key in next) {\n        if (key == item[0]) {\n          item.push(next[key]);\n        }\n      }\n    }\n    return accu;\n  }, [...results]);\n  return results;\n};\n\n\n\nconst generateChart = ({ bindto, columns }: { bindto: string, columns: [string, ...Primitive[]][]; }) => {\n  const opts: ChartConfiguration = {\n    bindto: '#chart',\n    data: {\n      columns\n    }\n  };\n  let chartData = generate(opts);\n\n  return chartData;\n};","<div class=\"tui-row tui-space_top-3\">\n  <div class=\"tui-col_8 tui-col-offset_1\">\n    <tui-calendar-range [items]=\"calItems\" (rangeChange)=\"getRange($event)\"></tui-calendar-range>\n    <div class=\"tui-col_2 tui-col-offset_1\">\n      <button tuiButton class=\"tui-space_right-3 tui-space_bottom-3\" (click)=\"startGetSensorData()\">{{sensorBtnTitle}}</button>\n    </div>\n  </div>\n</div>\n\n<div class=\"tui-row tui-space_top-3 d3-chart\">\n  <div class=\"tui-col-10 tui-col-offset_1\">\n    <div id=\"chart\"></div>\n  </div>\n</div>","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  production: false,\n  firebaseConfig: {\n    apiKey: \"AIzaSyAl_miXHGEsZGKgeRJFwqlSOowX951WqEE\",\n    authDomain: \"airappsora.firebaseapp.com\",\n    databaseURL: \"https://airappsora.firebaseio.com\",\n    projectId: \"airappsora\",\n    storageBucket: \"airappsora.appspot.com\",\n    messagingSenderId: \"291294931192\",\n    appId: \"1:291294931192:web:305a6acc75c9579792b30d\",\n    measurementId: \"G-J85G113BP7\"\n  }\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\n","import { Component, OnInit } from '@angular/core';\nimport { FormGroup, FormControl, Validators } from '@angular/forms';\nimport { Router } from '@angular/router';\nimport { AuthService } from 'src/app/services/auth.service';\n\n@Component({\n  selector: 'app-login',\n  templateUrl: './login.component.html',\n  styleUrls: ['./login.component.scss']\n})\nexport class LoginComponent implements OnInit {\n\n  constructor(private authSvc: AuthService, private router: Router) { }\n\n  ngOnInit() {\n  }\n\n  loginForm = new FormGroup({\n    nameValue: new FormControl('', [Validators.required, Validators.minLength(2), Validators.email]),\n    passwordValue: new FormControl('', [Validators.required, Validators.minLength(2)]),\n  });\n\n  logIn() {\n    const { nameValue: email, passwordValue: password } = this.loginForm.value;\n    this.authSvc.logIn({ email, password }).subscribe(user => {\n      if (user) {\n        this.router.navigateByUrl('/sensors');\n      } else {\n        this.router.navigateByUrl('/');\n      }\n    });\n  }\n}\n","<div class=\"tui-container\">\n  <form [formGroup]=\"loginForm\">\n    <div class=\"tui-row tui-row_sme\">\n      <div class=\"tui-col_8\">\n        <h3 class=\"tui-form__header tui-form__header_margin-top_none\">\n          Log in to your account\n        </h3>\n        <div class=\"tui-form__row\">\n          <tui-input tuiTextfieldExampleText=\"Field placeholder\" formControlName=\"nameValue\" tuiHintContent=\"test01@test.com\">\n            Email<span class=\"tui-required\"></span>\n          </tui-input>\n          <div class=\"tui-form__field-note\">test01@test.com</div>\n          <tui-field-error formControlName=\"nameValue\"></tui-field-error>\n        </div>\n        <div class=\"tui-form__row tui-form__row_multi-fields\">\n          <div class=\"tui-form__multi-field\">\n            <tui-input-password formControlName=\"passwordValue\" tuiHintContent=\"test01\">\n              Password\n            </tui-input-password>\n            <div class=\"tui-form__field-note\">test01</div>\n            <tui-field-error formControlName=\"passwordValue\"></tui-field-error>\n          </div>\n        </div>\n        <h3 class=\"tui-form__header tui-form__header_margin-bottom_small\">\n          \n        </h3>\n        <h3 class=\"tui-form__header\">Login</h3>\n        <div class=\"tui-form__buttons\">\n          <button tuiButton class=\"tui-form__button\" size=\"l\" type=\"submit\" [disabled]=\"!loginForm.valid\" (click)=\"logIn()\">\n            Log In\n          </button>\n          <!-- <button tuiButton type=\"button\" class=\"tui-form__button\" appearance=\"flat\" size=\"l\">\n            Cancel\n          </button> -->\n        </div>\n      </div>\n    </div>\n  </form>\n</div>","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { TuiAxesModule, TuiBarChartModule, TuiBarModule } from '@taiga-ui/addon-charts';\nimport { TuiButtonModule, TuiLabelModule, TuiSvgModule, TuiModeModule, TuiLoaderModule } from '@taiga-ui/core';\nimport { TuiTabsModule } from '@taiga-ui/kit';\nimport {\n  TuiInputModule,\n  TuiInputPasswordModule,\n  TuiFieldErrorModule,\n  TuiSelectModule,\n  TuiDataListWrapperModule,\n  TuiAvatarModule,\n  TuiActionModule,\n  TuiBadgedContentModule,\n  TuiBadgeModule,\n  TuiBreadcrumbsModule,\n  TuiCalendarMonthModule,\n  TuiCalendarRangeModule,\n  TuiCheckboxBlockModule,\n  TuiCheckboxLabeledModule,\n  TuiCheckboxModule,\n  TuiComboBoxModule,\n  TuiDropdownSelectionModule,\n  TuiFilterModule,\n  TuiHighlightModule,\n  TuiInputCopyModule,\n  TuiInputCountModule,\n  TuiInputDateModule,\n  TuiInputDateRangeModule,\n  TuiInputDateTimeModule,\n  TuiInputFileModule,\n  TuiInputInlineModule,\n  TuiInputMonthModule,\n  TuiInputMonthRangeModule,\n  TuiInputNumberModule,\n  TuiInputPhoneInternationalModule,\n  TuiInputPhoneModule,\n  TuiInputRangeModule,\n  TuiInputSliderModule,\n  TuiInputTagModule,\n  TuiInputTimeModule,\n  TuiIslandModule,\n  TuiLazyLoadingModule,\n  TuiLineClampModule,\n  TuiMarkerIconModule,\n  TuiMultiSelectModule,\n  TuiPaginationModule,\n  TuiPresentModule,\n  TuiRadioBlockModule,\n  TuiRadioLabeledModule,\n  TuiRadioListModule,\n  TuiRadioModule,\n  TuiSliderModule,\n  TuiStepperModule,\n  TuiTagModule,\n  TuiTextAreaModule,\n  TuiToggleModule,\n} from '@taiga-ui/kit';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    ReactiveFormsModule,\n    TuiModeModule,\n    TuiBarChartModule,\n    TuiButtonModule,\n    TuiLabelModule,\n    TuiSvgModule,\n    TuiAxesModule,\n    TuiBarModule,\n    TuiActionModule,\n    TuiAvatarModule,\n    TuiBadgedContentModule,\n    TuiBadgeModule,\n    TuiBreadcrumbsModule,\n    TuiCalendarMonthModule,\n    TuiCalendarRangeModule,\n    TuiCheckboxBlockModule,\n    TuiCheckboxLabeledModule,\n    TuiCheckboxModule,\n    TuiComboBoxModule,\n    TuiDataListWrapperModule,\n    TuiDropdownSelectionModule,\n    TuiFieldErrorModule,\n    TuiFilterModule,\n    TuiHighlightModule,\n    TuiInputCopyModule,\n    TuiInputCountModule,\n    TuiInputDateModule,\n    TuiInputDateRangeModule,\n    TuiInputDateTimeModule,\n    TuiInputFileModule,\n    TuiInputInlineModule,\n    TuiInputModule,\n    TuiInputMonthModule,\n    TuiInputMonthRangeModule,\n    TuiInputNumberModule,\n    TuiInputPasswordModule,\n    TuiInputPhoneInternationalModule,\n    TuiInputPhoneModule,\n    TuiInputRangeModule,\n    TuiInputSliderModule,\n    TuiInputTagModule,\n    TuiInputTimeModule,\n    TuiIslandModule,\n    TuiLazyLoadingModule,\n    TuiLineClampModule,\n    TuiMarkerIconModule,\n    TuiMultiSelectModule,\n    TuiPaginationModule,\n    TuiPresentModule,\n    TuiRadioBlockModule,\n    TuiRadioLabeledModule,\n    TuiRadioListModule,\n    TuiRadioModule,\n    TuiSelectModule,\n    TuiSliderModule,\n    TuiStepperModule,\n    TuiTabsModule,\n    TuiTagModule,\n    TuiTextAreaModule,\n    TuiToggleModule,\n    TuiLoaderModule\n  ],\n  exports: [\n    CommonModule,\n    FormsModule,\n    ReactiveFormsModule,\n    TuiModeModule,\n    TuiBarChartModule,\n    TuiButtonModule,\n    TuiLabelModule,\n    TuiSvgModule,\n    TuiAxesModule,\n    TuiBarModule,\n    TuiActionModule,\n    TuiAvatarModule,\n    TuiBadgedContentModule,\n    TuiBadgeModule,\n    TuiBreadcrumbsModule,\n    TuiCalendarMonthModule,\n    TuiCalendarRangeModule,\n    TuiCheckboxBlockModule,\n    TuiCheckboxLabeledModule,\n    TuiCheckboxModule,\n    TuiComboBoxModule,\n    TuiDataListWrapperModule,\n    TuiDropdownSelectionModule,\n    TuiFieldErrorModule,\n    TuiFilterModule,\n    TuiHighlightModule,\n    TuiInputCopyModule,\n    TuiInputCountModule,\n    TuiInputDateModule,\n    TuiInputDateRangeModule,\n    TuiInputDateTimeModule,\n    TuiInputFileModule,\n    TuiInputInlineModule,\n    TuiInputModule,\n    TuiInputMonthModule,\n    TuiInputMonthRangeModule,\n    TuiInputNumberModule,\n    TuiInputPasswordModule,\n    TuiInputPhoneInternationalModule,\n    TuiInputPhoneModule,\n    TuiInputRangeModule,\n    TuiInputSliderModule,\n    TuiInputTagModule,\n    TuiInputTimeModule,\n    TuiIslandModule,\n    TuiLazyLoadingModule,\n    TuiLineClampModule,\n    TuiMarkerIconModule,\n    TuiMultiSelectModule,\n    TuiPaginationModule,\n    TuiPresentModule,\n    TuiRadioBlockModule,\n    TuiRadioLabeledModule,\n    TuiRadioListModule,\n    TuiRadioModule,\n    TuiSelectModule,\n    TuiSliderModule,\n    TuiStepperModule,\n    TuiTabsModule,\n    TuiTagModule,\n    TuiTextAreaModule,\n    TuiLoaderModule\n  ]\n})\nexport class SharedModulesModule { }\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-auth',\n  templateUrl: './auth.component.html',\n  styleUrls: ['./auth.component.scss']\n})\nexport class AuthComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit(): void {\n  }\n\n}\n","<app-login></app-login>","import { Component } from '@angular/core';\n\n\nconst sensor = 'testfcf5c42aff80';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.css']\n})\nexport class AppComponent {\n  title = 'fbTestApp';\n\n  constructor() {\n    // this.getData();\n  }\n\n\n\n\n\n\n}","<tui-root>\n  <app-header></app-header>\n  <router-outlet></router-outlet>\n</tui-root>","import { NgModule } from '@angular/core';\n\nimport { LoginComponent } from './components/login/login.component';\nimport { ChooseSensorComponent } from './components/choose-sensor/choose-sensor.component';\nimport { HeaderComponent } from './components/header/header.component';\nimport { SharedModulesModule } from './shared.modules.module';\nimport { TuiSensorComponent } from './components/tui-sensor/tui-sensor.component';\nimport { D3SensorComponent } from './components/d3-sensor/d3-sensor.component';\n\n\n\n@NgModule({\n  imports: [\n    SharedModulesModule\n  ],\n  declarations: [\n    LoginComponent,\n    ChooseSensorComponent,\n    HeaderComponent,\n    TuiSensorComponent,\n    D3SensorComponent\n  ],\n  exports: [\n    SharedModulesModule,\n    LoginComponent,\n    ChooseSensorComponent,\n    HeaderComponent,\n    TuiSensorComponent,\n    D3SensorComponent\n  ]\n})\nexport class SharedModule { }\n","import { Component, EventEmitter, OnInit, Output } from '@angular/core';\nimport { FormGroup, FormControl, Validators } from '@angular/forms';\nimport { Router } from '@angular/router';\nimport { SensorsService } from 'src/app/services/sensors.service';\nimport { testSensorId } from '../../models/';\n\n@Component({\n  selector: 'app-choose-sensor',\n  templateUrl: './choose-sensor.component.html',\n  styleUrls: ['./choose-sensor.component.scss']\n})\nexport class ChooseSensorComponent implements OnInit {\n  @Output('sensorIdSelected') sensorIdSelected: EventEmitter<string> = new EventEmitter();\n  sensorBtnTitle: 'Start getting Data' | 'Stop' = 'Start getting Data';\n  fullSensorDateRange = [];;\n  items = [\n    testSensorId,\n  ];\n\n  selectedSensorId = null;\n\n  sensorSelectForm: FormGroup;\n\n  constructor(private router: Router, private sensorSvc: SensorsService) { }\n\n  ngOnInit() {\n    this.sensorSelectForm = new FormGroup({\n      sensor: new FormControl(this.items[0], Validators.required),\n    });\n  }\n\n  sensorSelected(sensorId) {\n    console.log('Sensor Selected: ', sensorId);\n    this.selectedSensorId = sensorId;\n  }\n\n  navigateToSensor() {\n    if (this.sensorSelectForm.valid && !!this.sensorSelectForm.value) {\n      const sensorVal = this.sensorSelectForm.get('sensor').value;\n      console.log({ sensorVal });\n      this.sensorIdSelected.emit(sensorVal);\n      this.sensorSvc.setSelectedSensor(sensorVal);\n      this.router.navigate(['sensors', sensorVal]);\n    }\n  }\n\n}\n","<div class=\"tui-container\">\n    <form [formGroup]=\"sensorSelectForm\">\n        <div class=\"tui-row tui-row_sme\">\n            <div class=\"tui-col_8\">\n                <h3 class=\"tui-form__header tui-form__header_margin-top_none\">\n                    Select a sensor to track\n                </h3>\n                <div class=\"tui-form__row tui-form__row_multi-fields\">\n                    <div class=\"tui-form__multi-field\">\n                        <tui-select tuiTextfieldSize=\"s\" formControlName=\"sensor\">\n                            <tui-data-list-wrapper *tuiDataList [items]=\"items\"></tui-data-list-wrapper>\n                        </tui-select>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class=\"tui-form__buttons\">\n            <button tuiButton class=\"tui-form__button\" size=\"l\" (click)=\"navigateToSensor()\">\n                SELECT\n            </button>\n        </div>\n    </form>\n</div>","export interface ISensorIndication {\r\n  timestamp: number;\r\n  AirQuality: IAirQuality;\r\n}\r\n\r\nexport interface IAirQuality {\r\n  CO2: number;\r\n  gasResistance: number;\r\n  Humidity: number;\r\n  IAQ: number;\r\n  PM1: number;\r\n  PM10: number;\r\n  PM2_5: number;\r\n  PM4: number;\r\n  Pressure: number;\r\n  Temperature: number;\r\n}\r\n\r\nexport const testSensorId = 'testfcf5c42aff80';\r\n","export * from './sensor-indication.model';","import { NgModule } from '@angular/core';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\nimport { BrowserModule } from '@angular/platform-browser';\nimport { AngularFireModule } from \"@angular/fire\";\nimport { TuiRootModule } from '@taiga-ui/core';\nimport { DateFnsModule } from 'ngx-date-fns';\nimport { environment } from \"../environments/environment\";\n\nimport { AppComponent } from './app/app.component';\nimport { SharedModule } from './shared/shared.module';\nimport { AppRoutingModule } from './app-routing.module';\nimport { AuthComponent } from './auth/auth.component';\n\n\n@NgModule({\n  declarations: [\n    AppComponent,\n    AuthComponent\n  ],\n  imports: [\n    BrowserModule,\n    BrowserAnimationsModule,\n    FormsModule,\n    ReactiveFormsModule,\n    TuiRootModule,\n    SharedModule,\n    AppRoutingModule,\n    DateFnsModule.forRoot(),\n    AngularFireModule.initializeApp(environment.firebaseConfig)\n  ],\n  providers: [],\n  bootstrap: [AppComponent]\n})\nexport class AppModule { }\n","import { Component, OnInit } from '@angular/core';\nimport { AngularFireAuth } from '@angular/fire/auth';\nimport { Router } from '@angular/router';\nimport { UntilDestroy, untilDestroyed } from '@ngneat/until-destroy';\nimport { AuthService } from 'src/app/services/auth.service';\n\n@UntilDestroy()\n@Component({\n  selector: 'app-header',\n  templateUrl: './header.component.html',\n  styleUrls: ['./header.component.scss']\n})\nexport class HeaderComponent implements OnInit {\n\n  constructor(public auth: AngularFireAuth, private router: Router, public authSvc: AuthService) { }\n  // avatar = 'https://ng-web-apis.github.io/dist/assets/images/web-api.svg';\n\n  ngOnInit() { }\n\n  logOut() {\n    this.authSvc.logOut().pipe(untilDestroyed(this)).subscribe(_ => this.router.navigateByUrl('/'));\n  }\n\n  logIn() {\n    this.router.navigateByUrl('/auth');\n  }\n\n}\n","<div class=\"wrapper\" tuiMode=\"onDark\">\n  <h1 class=\"tui-text_h3 title\" >Sensor Tracker</h1>\n  <div class=\"divider\"></div>\n  <div class=\"auth-container\" *ngIf=\"auth.user | async as user; else showLogin\">\n    <h3>Hello, &nbsp; {{ user.email }}</h3>\n    <button tuiIconButton type=\"button\" class=\"tui-space_right-3 tui-space_left-3\" (click)=\"logOut()\">\n      <span class=\"material-icons\">\n        logout\n      </span>\n    </button>\n  </div>\n  <ng-template #showLogin>\n    <!-- <h3 class=\"tui-text_h6\">Please login</h3> -->\n    <button tuiIconButton type=\"button\" class=\"tui-space_right-3 tui-space_left-3\"  (click)=\"logIn()\">\n      <span class=\"material-icons\">\n        login\n      </span>\n    </button>\n  </ng-template>\n</div>\n\n<!-- <ng-template #icon>\n  <tui-avatar size=\"xs\" [rounded]=\"true\" [avatarUrl]=\"avatar\"></tui-avatar>\n</ng-template> -->","import { Injectable } from '@angular/core';\nimport { AngularFireDatabase, ChildEvent, QueryFn, SnapshotAction } from '@angular/fire/database';\nimport { Observable, Subscriber, from, of, throwError } from 'rxjs';\nimport { catchError, concatMap, map, take, tap } from 'rxjs/operators';\nimport firebase from 'firebase';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class DbService {\n\n  constructor(private fDb: AngularFireDatabase) { }\n\n  listSnapshots<T>({ path, query, snapEvents }: { path: string; query?: QueryFn; snapEvents?: string[]; } = { path: '', query: null, snapEvents: ['child_added', 'child_removed'] }) {\n    return new Observable<T[]>((inner: Subscriber<T[]>) => {\n      const events: Array<ChildEvent> = snapEvents as Array<ChildEvent>;\n      this.fDb.list(path, query).snapshotChanges(events).pipe(\n        // shareReplay({ bufferSize: 1, refCount: true, windowTime: 300 }),\n        concatMap((vals: Array<SnapshotAction<T>>) => {\n          let chats = vals.map(val => val.payload.exists() && val.payload.val() as T);\n          return of(chats);\n        }),\n        // tap(vals => console.log(`[dbSvc->listSnapshots()] :: new snapshot ${JSON.stringify(vals)}`)),\n        catchError((err) => {\n          console.error(`[DbService->listSnapshots()] ::::::::   ${JSON.stringify(err)}`);\n          return of(null);\n        })\n      ).subscribe(\n        val => inner.next(val),\n        err => inner.error(err),\n        () => inner.complete()\n      );\n    });\n  }\n\n\n  list<T>({ path, dateRange, snapEvents, reducingFn }: {\n    path: string;\n    dateRange?: { startAt: number, endAt: number; };\n    snapEvents?: string[];\n    reducingFn?: (arg0: T[]) => T[];\n  } = {\n      path: '',\n      dateRange: null,\n      snapEvents: ['child_added'],\n      reducingFn: null\n    }\n  ) {\n    const events: Array<ChildEvent> = snapEvents as Array<ChildEvent>;\n\n    return new Observable<(T & { keyID?: string; })[]>(inner => {\n      const sensorDataRef = this.fDb.object<T[]>(path).query.ref;\n\n      const startAT = dateRange.startAt || (Date.now() - 1000 * 60 * 60 * 60 * 24);\n      const endAT = dateRange.endAt || Date.now();\n\n      let query: QueryFn | null = ((ref: firebase.database.Reference) => sensorDataRef.orderByChild('timestamp')\n        .startAfter(startAT, 'timestamp')\n        .endBefore(endAT, 'timestamp'));\n\n\n      return this.fDb.list<T>(sensorDataRef, query).valueChanges(events, { idField: 'keyID' }).pipe(\n        // shareReplay({ bufferSize: 1, refCount: true, windowTime: 300 }),\n        tap(vals => console.log(`[DbSvc->list<T>()] number of Items ::::::::::::::::::::::::::::: ${vals.length} `)),\n        map((vals: (T & { keyID?: string; })[]) => {\n          if (!reducingFn) return vals;\n\n          return reducingFn(vals);\n        }),\n        tap(vals => console.log(`[DbSvc->list<T>()] REDUCED number of Items ::::::::::::::::::::::::::::: ${vals.length} `)),\n        catchError((err) => {\n          console.error(`[DbService->list()]::::::::   ${JSON.stringify(err)}`);\n          return throwError(err);\n        })\n      ).subscribe(\n        val => inner.next(val),\n        err => inner.error(err),\n        () => inner.complete()\n      );\n    });\n\n  }\n\n  update<T>(path: string, data: object) {\n    return from(this.fDb.object<T>(path).update(data));\n  }\n\n  set<T>(path: string, data: T) {\n    return from(this.fDb.object<T>(path).set(data));\n  }\n\n  push<T>(path: string, data: T) {\n    // let pushID = this.fDb.createPushId();\n    // data = { ...data, pushID };\n\n    // return from(this.fDb.list<T>(path).push(data)).pipe(map(pushResult => pushResult.toJSON()));\n\n    return from(this.fDb.database.ref(`${path}`).push(data)).pipe(map(pushResult => pushResult.toJSON()));\n  }\n\n  get<T>(path: string) {\n    let objectRef = this.fDb.database.ref(path);\n    objectRef.orderByKey().ref.get().then(object => object.val());\n    return this.fDb.object<T>(path).valueChanges().pipe(\n      catchError((err) => {\n        console.error(`[DbService->get()]::::::::   ${JSON.stringify(err)}`);\n        return throwError(err);\n      })\n    );\n  }\n\n  getFirstOnce<T>(path: string) {\n    // this.fDb.object<T>()\n    return from(new Promise((resolve, reject) => this.fDb.database.ref(path).orderByKey().limitToFirst(1).once('value', snap => resolve(snap.val()))))\n      .pipe(\n        take(1),\n        map(val => Object.values(val)[0] as T),\n        tap(_ => console.log(`Get Single value from path ${path} `)),\n        catchError(err => {\n          console.error(`[DbService->delete()]::::::::   ${JSON.stringify(err)}`);\n          return throwError(err);\n        })\n      );\n  }\n\n  getLastOnce<T>(path: string) {\n    return from(new Promise((resolve, reject) => this.fDb.database.ref(path).orderByKey().limitToLast(1).once('value', snap => resolve(snap.val()))))\n      .pipe(\n        take(1),\n        map(val => Object.values(val)[0] as T),\n        tap(_ => console.log(`Get Single value from path ${path} `)),\n        catchError(err => {\n          console.error(`[DbService->delete()]::::::::   ${JSON.stringify(err)}`);\n          return throwError(err);\n        })\n      );\n  }\n\n  delete(path: string, keyId: string) {\n    return from(this.fDb.list(path, ref => ref.child(keyId)).query.ref.remove()).pipe(\n      tap(_ => console.log(`Removed entry from path ${path} with KeyID :: ${keyId}`)),\n      catchError(err => {\n        console.error(`[DbService->delete()]::::::::   ${JSON.stringify(err)}`);\n        return throwError(err);\n      })\n    );\n  }\n\n  async getSnapshot<T>(path: string): Promise<T> {\n    const item = await (this.fDb.database.ref(path).once('value'));\n    return item.exists() && (item.toJSON() as T);\n  }\n\n}\n\n","import { Injectable } from '@angular/core';\r\nimport { AngularFireAuth } from '@angular/fire/auth';\r\nimport { AngularFireAuthGuard, loggedIn } from '@angular/fire/auth-guard';\r\nimport { from, throwError } from 'rxjs';\r\nimport { catchError, map, tap } from 'rxjs/operators';\r\nimport { UserService } from './user.service';\r\n\r\n@Injectable({ providedIn: 'root' })\r\nexport class AuthService {\r\n\r\n  constructor(private fbAuth: AngularFireAuth, private userSvc: UserService) { }\r\n\r\n  logIn({ email, password }: { email: string, password: string; }) {\r\n    return from(this.fbAuth.signInWithEmailAndPassword(email, password)).pipe(\r\n      tap(userCreds => console.log(`Logged in with User Details ${JSON.stringify(userCreds)}`)),\r\n      tap(userCreds => this.userSvc.setCurrentUser(userCreds.user)),\r\n      map(userCreds => !!userCreds.user),\r\n      catchError(err => {\r\n        console.error(`[AuthSvc->logIn()]::: ${err}`);\r\n        return throwError(err);\r\n      })\r\n    );\r\n  }\r\n\r\n  logOut() {\r\n    return from(this.fbAuth.signOut()).pipe(\r\n      tap(_ => console.log('Signing out...')),\r\n      tap(_ => this.userSvc.setCurrentUser(null)),\r\n      catchError(err => {\r\n        console.error(`[AuthSvc->logOUT()]::: ${err}`);\r\n        return throwError(err);\r\n      })\r\n    );\r\n  }\r\n\r\n}","import { Injectable } from '@angular/core';\nimport { map, tap } from 'rxjs/operators';\nimport { toDate } from 'date-fns';\nimport { ru } from \"date-fns/locale\";\n\nimport { ISensorIndication } from '../shared/models';\nimport { DbService } from './db.service';\nimport { BehaviorSubject } from 'rxjs';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class SensorsService {\n  private _selectedSensor$$: BehaviorSubject<string> = new BehaviorSubject(null);\n\n  constructor(private dbSvc: DbService) { }\n\n  setSelectedSensor(sensorId: string = null) {\n    sensorId && localStorage.setItem('sensorID', sensorId);\n\n    this._selectedSensor$$.next(sensorId);\n  }\n\n  get selectedSensor() {\n    const id = localStorage.getItem('sensorID');\n    if (id) this._selectedSensor$$.next(id);\n    return this._selectedSensor$$.value;\n  }\n\n  getAllSensorData(sensorId: string, dateRange?: { startAt: number, endAt: number; }) {\n    console.log({ dateRange });\n\n    const reduceToEvery = (factor = 100) => (items: ISensorIndication[]) => items.filter((_, i) => (i % factor == 0));\n    const reducingFn = reduceToEvery(1000);\n\n    return this.dbSvc.list<ISensorIndication>({ path: sensorIdPath(sensorId), dateRange, reducingFn }).pipe(\n      map((data: (ISensorIndication & { keyID?: string; })[]) => data.map((singleVal) => ({\n        ...singleVal,\n        date: toDate(singleVal.timestamp),\n        RuDate: ru.formatLong.dateTime(singleVal.timestamp)\n      })))\n    );\n  }\n\n  getSensorFirstVal(sensorId: string) {\n    return this.dbSvc.getFirstOnce<ISensorIndication>(sensorIdPath(sensorId));\n  }\n\n  getSensorLastVal(sensorId: string) {\n    return this.dbSvc.getLastOnce<ISensorIndication>(sensorIdPath(sensorId));\n  }\n\n  getSensorFirstValTime(sensorId: string) {\n    return this.getSensorFirstVal(sensorId).pipe(\n      map(sensorRes => toDate(sensorRes.timestamp)),\n      tap(date => console.log('[SensorsSvc->getAllSensorData()]  Sensor first Time ::: ', date))\n    );\n  }\n\n  getSensorLastValTime(sensorId: string) {\n    return this.getSensorLastVal(sensorId).pipe(\n      map(sensorRes => toDate(sensorRes.timestamp)),\n      tap(date => console.log('[SensorsSvc->getAllSensorData()]  Sensor Last Time ::: ', date))\n    );\n  }\n\n}\n\n\nconst sensorIdPath = (sensorId: string) => `sensors/${sensorId}`;","import { Injectable } from '@angular/core';\nimport { BehaviorSubject, Observable } from 'rxjs';\nimport firebase from \"firebase\";\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class UserService {\n  private currentUser$$ = new BehaviorSubject<firebase.User>(null);\n  private isLoggedIn$$ = new BehaviorSubject<boolean>(null);\n\n  setCurrentUser(user: firebase.User) {\n    this.currentUser$$.next(user);\n    this.setLoggedIn(true);\n  }\n\n  setLoggedIn(val = false) {\n    this.isLoggedIn$$.next(val);\n  }\n\n  public get isLoggedIn$(): Observable<boolean> {\n    return this.isLoggedIn$$.asObservable();\n  }\n\n  public get currentUser$(): Observable<firebase.User | null> {\n    return this.currentUser$$.asObservable();\n  }\n\n  constructor() { }\n}\n","import { AfterViewInit, Component, Input, OnInit, ViewChild } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { TuiDay, TuiDayRange, TuiDayLike, ceil } from \"@taiga-ui/cdk\";\nimport { TuiCalendarRangeComponent, tuiCreateDefaultDayRangePeriods, TUI_CALENDAR_DATA_STREAM } from '@taiga-ui/kit';\nimport { of } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { UntilDestroy, untilDestroyed } from '@ngneat/until-destroy';\nimport firebase from 'firebase';\n\nimport { SensorsService } from 'src/app/services/sensors.service';\nimport { ISensorIndication, IAirQuality } from '../../models/';\n\nconst today = new Date();\nconst [year, month, day] = [today.getFullYear(), today.getMonth(), today.getDay()];\n\nexport const calendarStream$ = of(\n  new TuiDayRange(new TuiDay(year, month, day), new TuiDay(year, month, day - 3)),\n);\n\n@UntilDestroy()\n@Component({\n  selector: 'app-tui-sensor',\n  templateUrl: './tui-sensor.component.html',\n  styleUrls: ['./tui-sensor.component.scss'],\n  providers: [\n    {\n      provide: TUI_CALENDAR_DATA_STREAM,\n      useValue: calendarStream$,\n    },\n  ],\n})\nexport class TuiSensorComponent implements OnInit, AfterViewInit {\n  @ViewChild(TuiCalendarRangeComponent) dateRange: TuiCalendarRangeComponent;\n  @Input() sensorId = '';\n  calItems = tuiCreateDefaultDayRangePeriods();\n  sensorBtnTitle: 'Start getting Data' | 'Stop' = 'Start getting Data';\n  fullSensorDateRange = [];\n  loadingState: 'stopped' | 'loading' | 'processed' = 'stopped';\n  fromTimestamp = firebase.firestore.Timestamp.fromMillis(Date.now()).toMillis();\n  toTimestamp = firebase.firestore.Timestamp.fromMillis(Date.now() - (1000 * 60 * 60 * 24 * 2)).toMillis();\n\n  constructor(private activeRoute: ActivatedRoute, private sensorsSvc: SensorsService) { }\n\n  ngOnInit() {\n    this.activeRoute.queryParams.pipe(untilDestroyed(this)).subscribe(params => {\n      this.sensorId = params['sensorID'];\n      this.sensorId = this.sensorsSvc.selectedSensor;\n      console.log(`[TUISensorCmp->ngOnIni()] :: sensor: ${this.sensorId}`);\n    });\n  }\n\n  ngAfterViewInit() {\n    const { from, to } = this.dateRange.value;\n    this.fromTimestamp = firebase.firestore.Timestamp.fromDate(new Date(to.toUtcNativeDate())).toMillis();\n    this.toTimestamp = firebase.firestore.Timestamp.fromDate(new Date(from.toUtcNativeDate())).toMillis();\n  }\n\n  startGetSensorData() {\n    // combineLatest([\n    //   this.sensorsSvc.getSensorFirstValTime(this.sensorId),\n    //   this.sensorsSvc.getSensorLastValTime(this.sensorId)\n    // ])\n    //   .subscribe(([first, last]) => this.fullSensorDateRange = [first, last]);\n\n    this.loadingState = 'loading';\n    this.sensorsSvc.getAllSensorData(this.sensorId, { startAt: this.fromTimestamp, endAt: this.toTimestamp })\n      .pipe(\n        untilDestroyed(this),\n        map((values: ISensorIndication[]) => {\n          const times = values.map(val => val.timestamp);\n          const vals = [...values.map(value => value.AirQuality)];\n          return { times, vals };\n        })\n        // take(1)\n      )\n      .subscribe(\n        ({ times, vals }: { times: number[], vals: IAirQuality[]; }) => {\n          this.sensorValue = getDataArray(vals);\n          let minMaxDates = [new Date(Math.min(...times)), new Date(Math.max(...times))];\n          this.dateStamp = minMaxDates;\n          this.loadingState = 'processed';\n        }\n      );\n  }\n\n  sensorValue = null;\n  dateStamp = [];\n  labelsY = ['0', '150000'];\n\n  getHeight(max: number): number {\n    return (max / ceil(max, -3)) * 100;\n  }\n\n  getRange(range: TuiDayRange) {\n    const { from, to } = range;\n    this.fromTimestamp = firebase.firestore.Timestamp.fromDate(new Date(from.toUtcNativeDate())).toMillis();\n    this.toTimestamp = firebase.firestore.Timestamp.fromDate(new Date(to.toUtcNativeDate())).toMillis();\n  }\n\n}\n\n\nconst getDataArray = (data: IAirQuality[]) => {\n  if (!!!data?.length) return [];\n\n  const sensorTypes = Object.keys(data[0]);\n  return data.reduce((accu = new Array(sensorTypes.length).fill([]), next: IAirQuality) => {\n    sensorTypes.forEach((sensorTypeName: keyof IAirQuality) => accu[sensorTypes.indexOf(sensorTypeName)].push(next[sensorTypeName]));\n    return accu;\n  }, new Array(sensorTypes.length).fill([]));\n};","<div class=\"tui-row tui-space_top-3\">\n  <div class=\"tui-col_8 tui-col-offset_1\">\n    <tui-calendar-range [items]=\"calItems\" (rangeChange)=\"getRange($event)\"></tui-calendar-range>\n    <div class=\"tui-col_2 tui-col-offset_1\">\n      <button tuiButton class=\"tui-space_right-3 tui-space_bottom-3\" (click)=\"startGetSensorData()\">{{sensorBtnTitle}}</button>\n    </div>\n  </div>\n</div>\n\n<div class=\"tui-row tui-space_top-3 sensor-results\">\n  <div class=\"tui-col-10 tui-col-offset_1 \" [ngSwitch]=\"loadingState\">\n    <ng-template [ngSwitchCase]=\"'stopped'\">\n      Select Dates Range and start listening sensor {{sensorId}} ...\n    </ng-template>\n    <ng-template [ngSwitchCase]=\"'loading'\">\n      <tui-loader [inheritColor]=\"true\" size=\"xxl\" [overlay]=\"true\">\n        loading data from firebase for sensor {{sensorId}} ...\n      </tui-loader>\n    </ng-template>\n    <ng-template [ngSwitchCase]=\"'processed'\">\n      <tui-axes class=\"axes\" [axisXLabels]=\"dateStamp\" [axisYLabels]=\"labelsY\">\n        <tui-bar-chart [max]=\"150000\" [value]=\"sensorValue\"></tui-bar-chart>\n      </tui-axes>\n    </ng-template>\n  </div>\n</div>","import { NgModule } from '@angular/core';\nimport { PreloadAllModules, RouterModule, Routes } from '@angular/router';\nimport { AngularFireAuthGuard, hasCustomClaim, redirectUnauthorizedTo, redirectLoggedInTo, canActivate } from '@angular/fire/auth-guard';\nimport { AuthComponent } from './auth/auth.component';\nimport { IsAnonymousGuard } from './services/anonymous.guard';\nimport { IsAuthGuard } from './services/auth.guard';\n\nconst redirectUnauthorizedToLogin = () => redirectUnauthorizedTo(['auth']);\nconst redirectLoggedInToItems = () => redirectLoggedInTo('/sensors');\n\nconst routes: Routes = [\n  { path: '', redirectTo: '/auth', pathMatch: 'full' },\n  {\n    path: 'auth',\n    ...canActivate(redirectLoggedInToItems),\n    component: AuthComponent\n  },\n  {\n    path: 'sensors',\n    ...canActivate(redirectUnauthorizedToLogin),\n    loadChildren: () => import('./sensors/sensors.module').then(m => m.SensorsModule)\n  }\n];\n// const routes: Routes = [\n//   { path: '', redirectTo: '/auth', pathMatch: 'full' },\n//   { path: 'auth', canActivate: [IsAnonymousGuard], component: AuthComponent },\n//   { path: 'sensors', canActivate: [IsAuthGuard], loadChildren: () => import('./sensors/sensors.module').then(m => m.SensorsModule) }\n// ];\n\n@NgModule({\n  imports: [RouterModule.forRoot(routes, { preloadingStrategy: PreloadAllModules })],\n  exports: [RouterModule]\n})\nexport class AppRoutingModule { }\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.error(err));\n","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"zn8P\";"],"sourceRoot":"webpack:///"}